{"version":3,"file":"Text.js","sourceRoot":"","sources":["../src/Text.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\n\r\nimport * as os from 'os';\r\n\r\n/**\r\n * The allowed types of encodings, as supported by Node.js\r\n * @public\r\n */\r\nexport const enum Encoding {\r\n  Utf8 = 'utf8'\r\n}\r\n\r\n/**\r\n * Enumeration controlling conversion of newline characters.\r\n * @public\r\n */\r\nexport const enum NewlineKind {\r\n  /**\r\n   * Windows-style newlines\r\n   */\r\n  CrLf = '\\r\\n',\r\n\r\n  /**\r\n   * POSIX-style newlines\r\n   *\r\n   * @remarks\r\n   * POSIX is a registered trademark of the Institute of Electrical and Electronic Engineers, Inc.\r\n   */\r\n  Lf = '\\n',\r\n\r\n  /**\r\n   * Default newline type for this operating system (`os.EOL`).\r\n   */\r\n  OsDefault = 'os'\r\n}\r\n\r\n/**\r\n * Operations for working with strings that contain text.\r\n *\r\n * @remarks\r\n * The utilities provided by this class are intended to be simple, small, and very\r\n * broadly applicable.\r\n *\r\n * @public\r\n */\r\nexport class Text {\r\n  private static readonly _newLineRegEx: RegExp = /\\r\\n|\\n\\r|\\r|\\n/g;\r\n  private static readonly _newLineAtEndRegEx: RegExp = /(\\r\\n|\\n\\r|\\r|\\n)$/;\r\n\r\n  /**\r\n   * Returns the same thing as targetString.replace(searchValue, replaceValue), except that\r\n   * all matches are replaced, rather than just the first match.\r\n   * @param input         - The string to be modified\r\n   * @param searchValue   - The value to search for\r\n   * @param replaceValue  - The replacement text\r\n   */\r\n  public static replaceAll(input: string, searchValue: string, replaceValue: string): string {\r\n    return input.split(searchValue).join(replaceValue);\r\n  }\r\n\r\n  /**\r\n   * Converts all newlines in the provided string to use Windows-style CRLF end of line characters.\r\n   */\r\n  public static convertToCrLf(input: string): string {\r\n    return input.replace(Text._newLineRegEx, '\\r\\n');\r\n  }\r\n\r\n  /**\r\n   * Converts all newlines in the provided string to use POSIX-style LF end of line characters.\r\n   *\r\n   * POSIX is a registered trademark of the Institute of Electrical and Electronic Engineers, Inc.\r\n   */\r\n  public static convertToLf(input: string): string {\r\n    return input.replace(Text._newLineRegEx, '\\n');\r\n  }\r\n\r\n  /**\r\n   * Converts all newlines in the provided string to use the specified newline type.\r\n   */\r\n  public static convertTo(input: string, newlineKind: NewlineKind): string {\r\n    return input.replace(Text._newLineRegEx, Text.getNewline(newlineKind));\r\n  }\r\n\r\n  /**\r\n   * Returns the newline character sequence for the specified `NewlineKind`.\r\n   */\r\n  public static getNewline(newlineKind: NewlineKind): string {\r\n    switch (newlineKind) {\r\n      case NewlineKind.CrLf:\r\n        return '\\r\\n';\r\n      case NewlineKind.Lf:\r\n        return '\\n';\r\n      case NewlineKind.OsDefault:\r\n        return os.EOL;\r\n    }\r\n    throw new Error('Unsupported newline kind');\r\n  }\r\n\r\n  /**\r\n   * Append characters to the end of a string to ensure the result has a minimum length.\r\n   * @remarks\r\n   * If the string length already exceeds the minimum length, then the string is unchanged.\r\n   * The string is not truncated.\r\n   */\r\n  public static padEnd(s: string, minimumLength: number, paddingCharacter: string = ' '): string {\r\n    if (paddingCharacter.length !== 1) {\r\n      throw new Error('The paddingCharacter parameter must be a single character.');\r\n    }\r\n\r\n    if (s.length < minimumLength) {\r\n      const paddingArray: string[] = new Array(minimumLength - s.length);\r\n      paddingArray.unshift(s);\r\n      return paddingArray.join(paddingCharacter);\r\n    } else {\r\n      return s;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Append characters to the start of a string to ensure the result has a minimum length.\r\n   * @remarks\r\n   * If the string length already exceeds the minimum length, then the string is unchanged.\r\n   * The string is not truncated.\r\n   */\r\n  public static padStart(s: string, minimumLength: number, paddingCharacter: string = ' '): string {\r\n    if (paddingCharacter.length !== 1) {\r\n      throw new Error('The paddingCharacter parameter must be a single character.');\r\n    }\r\n\r\n    if (s.length < minimumLength) {\r\n      const paddingArray: string[] = new Array(minimumLength - s.length);\r\n      paddingArray.push(s);\r\n      return paddingArray.join(paddingCharacter);\r\n    } else {\r\n      return s;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * If the string is longer than maximumLength characters, truncate it to that length\r\n   * using \"...\" to indicate the truncation.\r\n   *\r\n   * @remarks\r\n   * For example truncateWithEllipsis('1234578', 5) would produce '12...'.\r\n   */\r\n  public static truncateWithEllipsis(s: string, maximumLength: number): string {\r\n    if (maximumLength < 0) {\r\n      throw new Error('The maximumLength cannot be a negative number');\r\n    }\r\n\r\n    if (s.length <= maximumLength) {\r\n      return s;\r\n    }\r\n\r\n    if (s.length <= 3) {\r\n      return s.substring(0, maximumLength);\r\n    }\r\n\r\n    return s.substring(0, maximumLength - 3) + '...';\r\n  }\r\n\r\n  /**\r\n   * Returns the input string with a trailing `\\n` character appended, if not already present.\r\n   */\r\n  public static ensureTrailingNewline(s: string, newlineKind: NewlineKind = NewlineKind.Lf): string {\r\n    // Is there already a newline?\r\n    if (Text._newLineAtEndRegEx.test(s)) {\r\n      return s; // yes, no change\r\n    }\r\n    return s + newlineKind; // no, add it\r\n  }\r\n}\r\n"]}